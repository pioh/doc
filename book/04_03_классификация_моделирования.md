[← К оглавлению](README.md)

---

# [Глава 4.3](04_03_классификация_моделирования.md): Классификация видов моделирования. Математические модели

## Введение

В прошлой главе (4.2) мы разобрались, что такое модели и зачем они нужны. Мы поняли, что модель — это упрощённое представление реальности, и посмотрели на основные типы информационных моделей: вербальные, графические, табличные, математические, структурные.

Но это была, скажем так, **классификация для чайников**. Реальный мир моделирования гораздо богаче. Модели можно классифицировать по куче разных признаков: статические или динамические, детерминированные или вероятностные, аналитические или имитационные. И каждый тип модели решает свои задачи.

**Эта глава связана с:**
- [**Глава 4.2**](04_02_информационные_модели.md) (Информационные модели) — базовые понятия моделирования
- [**Глава 4.4**](04_04_модели_решения_задач.md) (Модели решения задач) — применение моделей на практике
- [**Глава 5.1**](05_01_алгоритм_и_свойства.md) (Алгоритмы) — модели процессов и алгоритмы
- [**Глава 1.5**](01_05_меры_информации.md) (Меры информации) — там была энтропия Шеннона, а это тоже математическая модель

Короче, если в прошлой главе мы научились рисовать блок-схемы и Use Case диаграммы, то сейчас будем **копать глубже** — разберёмся с классификацией моделирования и погрузимся в математические модели.

**Зачем это нужно?** Потому что на экзамене могут спросить: "Чем отличается детерминированная модель от стохастической?" или "Что такое имитационное моделирование?". А ещё потому, что математические модели — это основа всей современной науки и техники. От прогноза погоды до рекомендаций Netflix — всё это математические модели.

---

## 4.3.1. Классификация видов моделирования

Моделирование можно классифицировать по разным критериям. Давай разберём основные.

---

### По фактору времени

#### 1. Статические модели

**Статическая модель** описывает состояние системы в **фиксированный момент времени**. Время не влияет на модель.

**Примеры:**
- **Фотография** — модель объекта в один момент времени
- **Схема организационной структуры компании** — кто кому подчиняется (на текущий момент)
- **Таблица "Товары на складе"** — снимок состояния склада
- **Карта города** — расположение улиц и зданий (если город не Дубай, где каждый год перестраивают полгорода)

**Когда использовать:** Когда нужно описать **текущее состояние** системы, а не её изменение во времени.

---

#### 2. Динамические модели

**Динамическая модель** описывает **изменение системы во времени**. Учитывает, как система эволюционирует.

**Примеры:**
- **Модель роста населения** `P(t) = P₀ × e^(r×t)` — численность населения меняется со временем
- **Модель движения тела** `s(t) = v₀×t + (a×t²)/2` — координата зависит от времени
- **Модель распространения эпидемии** (SIR-модель) — количество заболевших растёт со временем
- **Графики акций на бирже** — цена меняется каждую секунду

**Когда использовать:** Когда важно понять, **как система меняется** во времени, прогнозировать будущее состояние.

**Аналогия:**
- **Статическая модель** = фотография (один кадр)
- **Динамическая модель** = видео (последовательность кадров)

---

### По способу реализации

#### 1. Аналитические модели

**Аналитическая модель** — это модель, представленная в виде **формулы** или **уравнения**, которое можно решить математически и получить точный ответ.

**Примеры:**
- **Формула свободного падения:** `h(t) = h₀ - (g×t²)/2`
- **Закон Ома:** `U = I × R`
- **Формула площади круга:** `S = π × r²`

**Плюсы:**
- Точное решение
- Быстрое вычисление
- Можно аналитически исследовать поведение системы

**Минусы:**
- Для сложных систем аналитическое решение может **не существовать** (попробуй найти точную формулу для прогноза погоды, лол)
- Требует упрощений, чтобы вывести формулу

---

#### 2. Имитационные модели (симуляции)

**Имитационная модель** — это модель, которая **симулирует** поведение системы шаг за шагом во времени. Вместо формулы — алгоритм, который запускается на компьютере.

**Примеры:**
- **Симулятор полёта** — физика самолёта считается в каждый момент времени
- **Модель очередей в банке** — генерируются случайные клиенты, симулируется их обслуживание
- **Модель движения толпы** — каждый человек = агент, все двигаются по своим правилам, взаимодействуют друг с другом
- **Симуляция распространения вируса** — каждый день пересчитывается количество заболевших, выздоровевших, умерших

**Плюсы:**
- Можно моделировать **сверхсложные системы**, где аналитическое решение невозможно
- Легко изменять параметры и смотреть, что получится (what-if анализ)

**Минусы:**
- Медленное (особенно для больших систем)
- Результат зависит от случайности (нужно запускать много раз и усреднять)

**Аналогия:**
- **Аналитическая модель** = рецепт (чёткая инструкция, результат предсказуем)
- **Имитационная модель** = кулинарный эксперимент (добавляешь ингредиенты по ходу, смотришь что получится)

---

### По степени определённости

#### 1. Детерминированные модели

**Детерминированная модель** — это модель, в которой **нет случайности**. При одних и тех же входных данных всегда получается **один и тот же результат**.

**Примеры:**
- **Формула площади круга:** `S = π × r²` — при `r = 5` всегда получается `S = 78.54`
- **Блок-схема алгоритма сортировки** — при одном массиве всегда одна и та же последовательность действий
- **Модель движения тела в вакууме** — траектория полностью определена начальными условиями

**Плюсы:**
- Результат предсказуем
- Легко отлаживать (если что-то не так, ошибка в формуле, а не в случайности)

**Минусы:**
- Реальный мир часто **не детерминирован** (случайные события, шумы, ошибки измерений)

---

#### 2. Стохастические модели (вероятностные)

**Стохастическая модель** — это модель, которая учитывает **случайность** и оперирует **вероятностями**. При одних и тех же входных данных результат может быть **разным**.

**Примеры:**
- **Модель броска монеты** — результат: орёл с вероятностью 50%, решка с вероятностью 50%
- **Модель очередей** — клиенты приходят случайно (время прихода — случайная величина)
- **Модель Монте-Карло** — метод, основанный на случайных числах (прогоняешь симуляцию 10 000 раз, получаешь распределение результатов)
- **Модель биржевых цен** — цена акции на следующий день зависит от миллиона случайных факторов

**Плюсы:**
- Реалистичнее (реальный мир полон случайностей)
- Можно оценить **риски** и **вероятность** разных исходов

**Минусы:**
- Нужно запускать много раз, чтобы получить статистически значимый результат
- Сложнее интерпретировать (вместо одного ответа — распределение ответов)

**Аналогия:**
- **Детерминированная модель** = калькулятор (ввёл числа, нажал "=", получил точный ответ)
- **Стохастическая модель** = рулетка (крутишь колесо, каждый раз новый результат)

---

### По области знаний

Модели можно классифицировать по той **предметной области**, которую они описывают.

**1. Физические модели**  
Описывают физические процессы: механика, термодинамика, электродинамика.

**Примеры:**
- Законы Ньютона: `F = m × a`
- Закон всемирного тяготения: `F = G × (m₁×m₂)/r²`
- Уравнение теплопроводности (описывает распространение тепла)

**2. Химические модели**  
Описывают химические реакции, концентрации веществ.

**Примеры:**
- Уравнение химической реакции: `2H₂ + O₂ → 2H₂O`
- Модель кинетики реакции (скорость реакции зависит от температуры и концентрации)

**3. Экономические модели**  
Описывают экономические процессы: спрос, предложение, инфляцию.

**Примеры:**
- Модель "спрос-предложение" (supply-demand)
- Модель инфляции
- Модель дисконтированного денежного потока (DCF) — оценка стоимости бизнеса

**4. Биологические модели**  
Описывают живые организмы, популяции, экосистемы.

**Примеры:**
- Модель роста популяции (экспоненциальный, логистический рост)
- Модель "хищник-жертва" (уравнения Лотки-Вольтерры)
- Модель распространения эпидемии (SIR-модель)

**5. Социальные модели**  
Описывают социальные процессы: распространение информации, мнений, поведение толпы.

**Примеры:**
- Модель распространения слухов
- Модель голосования (как люди принимают решение на выборах)
- Модель социальной сети (граф, узлы = люди, рёбра = дружба)

**6. Технические модели**  
Описывают работу технических систем: компьютеры, сети, алгоритмы.

**Примеры:**
- Модель работы процессора (архитектура фон Неймана)
- Модель сетевого протокола (модель OSI, [глава 8.7](08_07_модель_osi.md))
- Алгоритмы сортировки (блок-схемы, сложность O(n²), O(n log n))

---

## 4.3.2. Математические модели: основные типы

Математические модели — это описание системы с помощью **формул, уравнений, функций**. Они составляют основу всей современной науки и техники.

Математические модели бывают разных типов в зависимости от используемого математического аппарата.

---

### 1. Алгебраические модели

**Алгебраическая модель** — это модель, представленная в виде **алгебраических уравнений** (без производных, без интегралов, без дифференциалов).

**Примеры:**

**1.1. Линейное уравнение**

Модель зависимости одной величины от другой:

```
y = a × x + b
```

**Пример:** Модель заработной платы.  
Зарплата = фиксированная часть + процент от продаж.

```
Зарплата = 20 000 ₽ + 0.05 × Продажи
```

Если продажи = 100 000 ₽, то зарплата = 20 000 + 5 000 = 25 000 ₽.

**1.2. Система линейных уравнений**

Модель с несколькими неизвестными.

**Пример:** Задача про яблоки и груши.

```
2 кг яблок + 3 кг груш = 500 ₽
4 кг яблок + 1 кг груш = 450 ₽
```

Система уравнений:

```
2x + 3y = 500
4x + 1y = 450
```

Решаем (методом подстановки, методом Крамера, или на калькуляторе):

```
x = 100 ₽ (цена 1 кг яблок)
y = 100 ₽ (цена 1 кг груш)
```

**1.3. Квадратное уравнение**

Модель движения тела с ускорением:

```
h(t) = h₀ + v₀×t - (g×t²)/2
```

где:
- `h(t)` — высота в момент времени `t`
- `h₀` — начальная высота
- `v₀` — начальная скорость
- `g` — ускорение свободного падения (≈9.8 м/с²)

**Задача:** Камень брошен вверх с высоты 10 м со скоростью 20 м/с. Через сколько секунд упадёт на землю?

```
h(t) = 10 + 20t - 4.9t²
```

Камень упадёт, когда `h(t) = 0`:

```
10 + 20t - 4.9t² = 0
-4.9t² + 20t + 10 = 0
```

Решаем квадратное уравнение (через дискриминант):

```
t = (-b ± √(b² - 4ac)) / 2a
t = (-20 ± √(400 + 196)) / (-9.8)
t = (-20 ± √596) / (-9.8)
t = (-20 ± 24.4) / (-9.8)

t₁ = (-20 + 24.4) / (-9.8) ≈ -0.45 (отрицательное время, нет смысла)
t₂ = (-20 - 24.4) / (-9.8) ≈ 4.53 секунды
```

**Ответ:** Камень упадёт через ~4.5 секунды.

---

### 2. Дифференциальные уравнения

**Дифференциальное уравнение** — это уравнение, которое связывает функцию с её **производными** (скоростью изменения).

Короче, если алгебраическая модель говорит "что есть сейчас", то дифференциальное уравнение говорит "**как это меняется**".

**Зачем нужны:** Для описания процессов изменения во времени — рост населения, распад радиоактивного вещества, распространение тепла, движение тела.

**Примеры:**

**2.1. Модель радиоактивного распада**

Скорость распада пропорциональна количеству вещества:

```
dN/dt = -λ × N
```

где:
- `N(t)` — количество радиоактивного вещества в момент времени `t`
- `λ` — константа распада
- `dN/dt` — скорость изменения количества

Решение этого уравнения:

```
N(t) = N₀ × e^(-λt)
```

**Пример:** Период полураспада углерода-14 составляет 5730 лет. Сколько останется вещества через 10 000 лет, если начальное количество `N₀ = 100 г`?

Константа распада:

```
λ = ln(2) / T_{1/2} = 0.693 / 5730 ≈ 0.000121 год⁻¹
```

Через 10 000 лет:

```
N(10000) = 100 × e^(-0.000121 × 10000)
N(10000) = 100 × e^(-1.21)
N(10000) ≈ 100 × 0.298 ≈ 29.8 г
```

**Ответ:** Останется примерно 30 г вещества.

---

**2.2. Модель остывания тела (закон Ньютона)**

Скорость остывания пропорциональна разности температур тела и окружающей среды:

```
dT/dt = -k × (T - T_окр)
```

где:
- `T(t)` — температура тела в момент времени `t`
- `T_окр` — температура окружающей среды
- `k` — коэффициент теплообмена

Решение:

```
T(t) = T_окр + (T₀ - T_окр) × e^(-kt)
```

**Пример:** Чашка кофе остывает. Начальная температура 90°C, температура комнаты 20°C, коэффициент `k = 0.1 мин⁻¹`. Какая будет температура через 10 минут?

```
T(10) = 20 + (90 - 20) × e^(-0.1 × 10)
T(10) = 20 + 70 × e^(-1)
T(10) = 20 + 70 × 0.368
T(10) ≈ 20 + 25.8 ≈ 45.8°C
```

**Ответ:** Через 10 минут температура кофе будет около 46°C (уже не горячий, но ещё тёплый).

---

### 3. Статистические модели

**Статистическая модель** — это модель, которая описывает **зависимость между переменными** на основе данных. Используются методы математической статистики: корреляция, регрессия, анализ данных.

**Примеры:**

**3.1. Линейная регрессия**

Модель для прогнозирования зависимости одной переменной от другой.

```
y = a × x + b + ε
```

где `ε` — случайная ошибка (шум).

**Пример:** Модель зависимости продаж от рекламного бюджета.

Данные:

| Реклама (тыс. ₽) | Продажи (тыс. ₽) |
| ---------------- | ---------------- |
| 10               | 120              |
| 20               | 150              |
| 30               | 180              |
| 40               | 210              |
| 50               | 240              |

Методом наименьших квадратов (МНК) находим коэффициенты:

```
y = 3x + 90
```

**Прогноз:** Если потратим на рекламу 60 тыс. ₽, то продажи составят:

```
y = 3 × 60 + 90 = 180 + 90 = 270 тыс. ₽
```

**Важно:** Это **статистическая модель**, а не детерминированная. Реальные продажи могут быть 260 тыс. или 280 тыс., потому что есть случайные факторы (сезонность, конкуренты, настроение покупателей).

---

**3.2. Корреляция**

Корреляция показывает, **насколько связаны** две переменные.

**Коэффициент корреляции Пирсона:**

```
r = cov(X, Y) / (σ_X × σ_Y)
```

где:
- `cov(X, Y)` — ковариация (мера совместной изменчивости)
- `σ_X`, `σ_Y` — стандартные отклонения

**Значения:**
- `r = +1` — идеальная положительная корреляция (чем больше X, тем больше Y)
- `r = 0` — нет корреляции (X и Y независимы)
- `r = -1` — идеальная отрицательная корреляция (чем больше X, тем меньше Y)

**Пример:** Корреляция между температурой на улице и продажами мороженого.

```
r ≈ +0.85 (сильная положительная корреляция)
```

Интерпретация: чем выше температура, тем больше продаж мороженого.

---

### 4. Модели теории вероятностей

**Вероятностная модель** описывает случайные события и их вероятности.

**Примеры:**

**4.1. Модель броска монеты**

Вероятность выпадения орла:

```
P(орёл) = 0.5
P(решка) = 0.5
```

**Задача:** Какова вероятность выпадения **двух орлов подряд**?

```
P(2 орла) = P(орёл) × P(орёл) = 0.5 × 0.5 = 0.25 (25%)
```

---

**4.2. Модель очередей (теория массового обслуживания)**

Модель для анализа очередей: сколько нужно касс в магазине, чтобы очередь не была слишком длинной?

**Основные параметры:**
- `λ` — интенсивность прихода клиентов (клиентов/час)
- `μ` — интенсивность обслуживания (клиентов/час на одну кассу)
- `ρ = λ / μ` — коэффициент загрузки системы

**Формула среднего времени ожидания в очереди (модель M/M/1):**

```
W = ρ / (μ × (1 - ρ))
```

**Пример:** В магазин приходит 40 клиентов/час, касса обслуживает 50 клиентов/час.

```
ρ = 40 / 50 = 0.8 (загрузка 80%)
W = 0.8 / (50 × (1 - 0.8)) = 0.8 / (50 × 0.2) = 0.8 / 10 = 0.08 часа = 4.8 минуты
```

**Ответ:** Средний клиент ждёт в очереди около 5 минут.

**Что будет, если добавить вторую кассу?** Загрузка упадёт, время ожидания сократится. (Для расчёта используется модель M/M/c, где `c` — количество касс.)

---

**4.3. Модель Монте-Карло**

**Метод Монте-Карло** — это метод имитационного моделирования на основе **случайных чисел**.

**Идея:** Запускаешь симуляцию много раз с случайными параметрами и получаешь распределение результатов.

**Пример 1: Вычисление числа π методом Монте-Карло**

Идея:
1. Рисуем квадрат со стороной 1.
2. Вписываем в него четверть круга радиуса 1.
3. Генерируем случайные точки (x, y) внутри квадрата.
4. Проверяем, попала ли точка внутрь круга: `x² + y² ≤ 1`.
5. Считаем отношение:

```
π ≈ 4 × (количество точек внутри круга) / (общее количество точек)
```

**Пример:** Генерируем 10 000 случайных точек, 7854 попали внутрь круга.

```
π ≈ 4 × 7854 / 10000 = 3.1416
```

(Точное значение π ≈ 3.14159...)

---

**Пример 2: Оценка риска инвестиций**

Допустим, ты вкладываешь деньги в акции. Доходность акций случайна и зависит от множества факторов.

**Модель:**
- Средняя годовая доходность: 10%
- Стандартное отклонение: 15% (волатильность)

Методом Монте-Карло симулируем 10 000 сценариев (каждый раз генерируется случайная доходность из нормального распределения) и смотрим, в скольких случаях портфель вырос, а в скольких упал.

**Результат:**
- В 70% сценариев портфель вырос
- В 30% сценариев портфель упал
- Средняя доходность: +8%
- Худший сценарий: -25%

**Вывод:** Риск есть, но в целом ожидается рост.

---

### 5. Теория графов

**Граф** — это математическая модель для описания **связей между объектами**.

**Основные понятия:**
- **Вершина (узел)** — объект
- **Ребро (связь)** — соединение между объектами
- **Ориентированный граф** — рёбра имеют направление (→)
- **Взвешенный граф** — рёбрам присвоены веса (расстояния, стоимости, времена)

**Примеры:**

**5.1. Граф социальной сети**

Узлы = пользователи, рёбра = дружба.

```
Алиса ←→ Боб
Боб ←→ Чарли
Чарли ←→ Алиса
Боб ←→ Дэйв
```

Граф позволяет:
- Найти друзей друзей (рекомендации друзей: "Возможно, вы знаете Дэйва?")
- Найти кратчайший путь между пользователями (степень разделения)
- Определить влиятельных пользователей (у кого больше всего связей)

---

**5.2. Граф дорог (навигация)**

Узлы = города, рёбра = дороги, вес ребра = расстояние.

```
Москва ←(650 км)→ Санкт-Петербург
Москва ←(450 км)→ Нижний Новгород
Нижний Новгород ←(400 км)→ Казань
```

**Задача:** Найти кратчайший путь от Москвы до Казани.

Алгоритм Дейкстры:
1. Прямой путь: Москва → Казань (нет прямого ребра)
2. Через Нижний Новгород: Москва → Нижний Новгород → Казань = 450 + 400 = 850 км

**Ответ:** Кратчайший путь: 850 км через Нижний Новгород.

---

**5.3. Граф задач (зависимости)**

Используется в управлении проектами (диаграмма Ганта, PERT).

```
Задача A (Разработка ТЗ) → Задача B (Проектирование)
Задача B → Задача C (Реализация)
Задача C → Задача D (Тестирование)
```

**Задача:** Определить критический путь (longest path) — последовательность задач, определяющую минимальное время завершения проекта.

---

### 6. Теория игр

**Теория игр** — раздел математики, изучающий **стратегическое взаимодействие** между игроками (людьми, компаниями, странами).

**Основные понятия:**
- **Игра** — ситуация с несколькими игроками, каждый выбирает стратегию
- **Стратегия** — план действий игрока
- **Выигрыш** — результат игры для каждого игрока

**Примеры:**

**6.1. Дилемма заключённого**

Классическая задача теории игр.

**Ситуация:** Двое подозреваемых (Алиса и Боб) арестованы. У каждого два варианта: **молчать** или **сдать другого**.

**Таблица выигрышей:**

|                      | Боб молчит        | Боб сдаёт        |
| -------------------- | ----------------- | ---------------- |
| **Алиса молчит**     | Оба: 1 год тюрьмы | Алиса: 10 лет, Боб: 0 лет |
| **Алиса сдаёт**      | Алиса: 0 лет, Боб: 10 лет | Оба: 5 лет       |

**Рациональный выбор:**
- Если Боб молчит, Алисе выгодно сдать (0 лет вместо 1 года)
- Если Боб сдаёт, Алисе выгодно сдать (5 лет вместо 10 лет)

**Равновесие Нэша:** Оба сдают друг друга → оба получают по 5 лет.

**Ирония:** Если бы оба молчали, оба получили бы всего по 1 году. Но из-за недоверия оба сдают друг друга и получают худший исход.

**Применение:** Анализ олигополий (компании конкурируют на цены), международные конфликты, экологические проблемы (загрязнение окружающей среды).

---

**6.2. Игра "камень-ножницы-бумага"**

**Стратегии:** Камень, Ножницы, Бумага.

**Правила:**
- Камень бьёт Ножницы
- Ножницы режут Бумагу
- Бумага оборачивает Камень

**Оптимальная стратегия:** Случайный выбор с вероятностью 1/3 для каждого варианта (смешанная стратегия).

Если играешь детерминированно (всегда выбираешь Камень), противник предскажет и всегда будет выбирать Бумагу.

---

## 4.3.3. Примеры математических моделей

### Пример 1: Модель логистического роста популяции

**Проблема экспоненциального роста:** В [главе 4.2](04_02_информационные_модели.md) мы рассмотрели модель `P(t) = P₀ × e^(r×t)` — экспоненциальный рост. Но это нереалистично, потому что популяция не может расти бесконечно (ограничены ресурсы, пространство, еда).

**Логистическая модель** учитывает **ёмкость среды** (carrying capacity) `K` — максимальное количество особей, которое может прокормить среда.

**Дифференциальное уравнение:**

```
dP/dt = r × P × (1 - P/K)
```

где:
- `P` — численность популяции
- `r` — коэффициент роста
- `K` — ёмкость среды

**Решение:**

```
P(t) = K / (1 + ((K - P₀) / P₀) × e^(-r×t))
```

**График:** S-образная кривая (sigmoid). Сначала рост экспоненциальный, затем замедляется и стабилизируется около `K`.

**Пример:** Популяция кроликов на острове.

- `P₀ = 100` (начальная численность)
- `r = 0.5` (коэффициент роста)
- `K = 1000` (остров может прокормить максимум 1000 кроликов)

Через 10 лет:

```
P(10) = 1000 / (1 + ((1000 - 100) / 100) × e^(-0.5×10))
P(10) = 1000 / (1 + 9 × e^(-5))
P(10) = 1000 / (1 + 9 × 0.0067)
P(10) = 1000 / (1 + 0.06)
P(10) ≈ 943 кролика
```

**Ответ:** Популяция кроликов приблизилась к ёмкости среды (943 из 1000).

---

### Пример 2: Модель "хищник-жертва" (уравнения Лотки-Вольтерры)

**Задача:** Смоделировать динамику популяций хищников (волков) и жертв (зайцев) в экосистеме.

**Модель:**

```
dx/dt = αx - βxy  (изменение популяции жертв)
dy/dt = -γy + δxy  (изменение популяции хищников)
```

где:
- `x` — численность жертв (зайцы)
- `y` — численность хищников (волки)
- `α` — коэффициент размножения жертв (без хищников)
- `β` — коэффициент гибели жертв от хищников
- `γ` — коэффициент естественной смертности хищников (без еды)
- `δ` — коэффициент роста хищников от поедания жертв

**Что происходит:**
1. Если зайцев много → волки размножаются
2. Если волков много → зайцев становится меньше
3. Если зайцев мало → волки вымирают от голода
4. Если волков мало → зайцы снова размножаются

**Результат:** Циклические колебания численности обеих популяций (осцилляции).

**График:** Синусоиды, сдвинутые по фазе (сначала растёт численность жертв, затем хищников).

**Реальный пример:** Популяции рыси и зайца в Канаде (данные за 100 лет показывают циклы с периодом ~10 лет).

---

### Пример 3: Модель распространения эпидемии (SIR-модель)

**Задача:** Смоделировать распространение инфекционного заболевания (например, гриппа).

**Модель:** Население делится на три группы:
- **S (Susceptible)** — восприимчивые (здоровые, но могут заболеть)
- **I (Infected)** — заболевшие (заразные)
- **R (Recovered)** — выздоровевшие (имеют иммунитет)

**Дифференциальные уравнения:**

```
dS/dt = -β × S × I / N  (заражение)
dI/dt = β × S × I / N - γ × I  (заражение минус выздоровление)
dR/dt = γ × I  (выздоровление)
```

где:
- `β` — скорость передачи инфекции (контактов в день × вероятность передачи)
- `γ` — скорость выздоровления (1 / средняя продолжительность болезни)
- `N = S + I + R` — общая численность населения

**Базовое репродуктивное число:**

```
R₀ = β / γ
```

- Если `R₀ > 1` → эпидемия разрастается
- Если `R₀ < 1` → эпидемия затухает

**Пример:** Грипп в городе с населением 100 000 человек.

- `β = 0.5` (один заболевший заражает 0.5 человек в день)
- `γ = 0.1` (средняя продолжительность болезни 10 дней)
- `R₀ = 0.5 / 0.1 = 5` (один заболевший заражает в среднем 5 человек)

Начальные условия:
- `S(0) = 99 990` (почти все здоровы)
- `I(0) = 10` (10 заболевших)
- `R(0) = 0` (никто не выздоровел)

**Результат симуляции:** Эпидемия достигает пика через ~30 дней, затем идёт на спад. В итоге ~80% населения переболеют.

**Применение:** Модели COVID-19, оценка эффективности карантина, прогноз нагрузки на больницы.

---

### Пример 4: Модель траектории движения снаряда

**Задача:** Рассчитать траекторию полёта снаряда, выпущенного под углом.

**Дано:**
- Начальная скорость: `v₀ = 50 м/с`
- Угол выстрела: `θ = 45°`
- Ускорение свободного падения: `g = 9.8 м/с²`

**Модель:** Траектория — парабола.

Координаты снаряда в момент времени `t`:

```
x(t) = v₀ × cos(θ) × t
y(t) = v₀ × sin(θ) × t - (g × t²) / 2
```

**Время полёта** (когда снаряд упадёт на землю, `y = 0`):

```
t_полёт = (2 × v₀ × sin(θ)) / g
```

**Дальность полёта:**

```
x_max = v₀² × sin(2θ) / g
```

**Расчёт:**

```
t_полёт = (2 × 50 × sin(45°)) / 9.8
t_полёт = (2 × 50 × 0.707) / 9.8
t_полёт ≈ 7.22 секунды

x_max = 50² × sin(90°) / 9.8
x_max = 2500 × 1 / 9.8
x_max ≈ 255 метров
```

**Ответ:** Снаряд пролетит 255 метров за 7.2 секунды.

---

### Пример 5: Модель оптимального размера заказа (формула Уилсона)

**Задача:** Компания закупает товары для склада. Если заказывать слишком часто → высокие транспортные расходы. Если заказывать редко → высокие затраты на хранение. Найти оптимальный размер заказа.

**Модель:**

Общие затраты:

```
TC = (D / Q) × S + (Q / 2) × H
```

где:
- `D` — годовой спрос (штук/год)
- `Q` — размер заказа (штук)
- `S` — стоимость одного заказа (доставка, оформление)
- `H` — стоимость хранения одной единицы товара в год

**Формула оптимального размера заказа (EOQ — Economic Order Quantity):**

```
Q* = √((2 × D × S) / H)
```

**Пример:** Магазин продаёт 10 000 единиц товара в год.

- `D = 10 000`
- `S = 200 ₽` (стоимость доставки одного заказа)
- `H = 5 ₽` (стоимость хранения одной единицы в год)

Оптимальный размер заказа:

```
Q* = √((2 × 10000 × 200) / 5)
Q* = √(4 000 000 / 5)
Q* = √800 000
Q* ≈ 894 единицы
```

**Ответ:** Оптимально заказывать по 894 единицы за раз.

Количество заказов в год:

```
Количество заказов = D / Q* = 10000 / 894 ≈ 11 заказов в год
```

---

### Пример 6: Модель дисконтирования денежных потоков (DCF)

**Задача:** Оценить стоимость бизнеса или инвестиционного проекта.

**Идея:** Деньги сегодня стоят дороже, чем деньги в будущем (из-за инфляции и альтернативной стоимости капитала). Поэтому будущие денежные потоки нужно **дисконтировать** (привести к текущей стоимости).

**Модель:**

```
PV = CF₁/(1+r) + CF₂/(1+r)² + ... + CFₙ/(1+r)ⁿ
```

где:
- `PV` — текущая стоимость (Present Value)
- `CFᵢ` — денежный поток в год `i`
- `r` — ставка дисконтирования (норма доходности)

**Пример:** Проект приносит доходы 3 года:

- Год 1: 100 тыс. ₽
- Год 2: 120 тыс. ₽
- Год 3: 150 тыс. ₽

Ставка дисконтирования `r = 10%`.

Текущая стоимость:

```
PV = 100/(1.1) + 120/(1.1)² + 150/(1.1)³
PV = 100/1.1 + 120/1.21 + 150/1.331
PV = 90.91 + 99.17 + 112.70
PV ≈ 302.78 тыс. ₽
```

**Ответ:** Текущая стоимость проекта ≈ 303 тыс. ₽.

Если проект стоит 250 тыс. ₽, то выгодно инвестировать (чистая прибыль = 303 - 250 = 53 тыс. ₽).

---

### Пример 7: Модель PageRank (Google)

**Задача:** Ранжировать веб-страницы по важности (какая страница должна быть выше в поисковой выдаче?).

**Идея:** Страница важна, если на неё ссылаются другие важные страницы.

**Модель:** Граф веб-страниц.

- Узлы = страницы
- Рёбра = ссылки

**Формула PageRank:**

```
PR(A) = (1 - d) + d × Σ (PR(B) / L(B))
```

где:
- `PR(A)` — PageRank страницы A
- `d` — коэффициент затухания (обычно 0.85)
- `B` — страницы, ссылающиеся на A
- `L(B)` — количество исходящих ссылок со страницы B

**Алгоритм:** Итеративный расчёт. Начальные значения `PR(A) = 1` для всех страниц, затем пересчитываем по формуле несколько раз, пока значения не стабилизируются.

**Пример:** Три страницы A, B, C.

- A → B
- B → C
- C → A, B

После итераций:

```
PR(A) ≈ 1.2
PR(B) ≈ 1.5
PR(C) ≈ 0.8
```

**Вывод:** Страница B наиболее важная (на неё ссылаются и A, и C).

---

### Пример 8: Модель распределения нагрузки на серверы (балансировка)

**Задача:** У нас есть 3 сервера. Как распределить запросы пользователей, чтобы нагрузка была равномерной?

**Модель:** Алгоритм Round Robin (по кругу).

```
Запрос 1 → Сервер 1
Запрос 2 → Сервер 2
Запрос 3 → Сервер 3
Запрос 4 → Сервер 1
Запрос 5 → Сервер 2
...
```

**Более сложная модель:** Weighted Round Robin (с весами, учитывающими производительность серверов).

Если Сервер 1 мощнее других в 2 раза:

```
Веса: Сервер 1 = 2, Сервер 2 = 1, Сервер 3 = 1
```

Распределение:

```
Запрос 1 → Сервер 1
Запрос 2 → Сервер 1
Запрос 3 → Сервер 2
Запрос 4 → Сервер 3
Запрос 5 → Сервер 1
...
```

---

### Пример 9: Модель машинного обучения — линейная регрессия с градиентным спуском

**Задача:** Обучить модель предсказывать цену квартиры по площади.

**Модель:**

```
цена = a × площадь + b
```

**Цель:** Найти коэффициенты `a` и `b`, минимизирующие ошибку предсказания.

**Функция потерь (MSE — Mean Squared Error):**

```
L = (1/n) × Σ (y_i - ŷ_i)²
```

где:
- `y_i` — реальная цена квартиры `i`
- `ŷ_i = a × x_i + b` — предсказанная цена

**Алгоритм градиентного спуска:**

Итеративно обновляем коэффициенты:

```
a := a - α × ∂L/∂a
b := b - α × ∂L/∂b
```

где `α` — learning rate (скорость обучения).

**Пример:** Данные о квартирах:

| Площадь (м²) | Цена (млн ₽) |
| ------------ | ------------ |
| 50           | 5            |
| 70           | 7            |
| 100          | 10           |

После обучения:

```
a ≈ 0.1 (каждый м² добавляет 0.1 млн ₽)
b ≈ 0 (нет базовой цены)
```

Модель:

```
цена = 0.1 × площадь
```

**Прогноз:** Квартира 80 м² стоит `0.1 × 80 = 8 млн ₽`.

---

### Пример 10: Модель цепей Маркова

**Задача:** Смоделировать поведение пользователя на сайте: какую страницу он посетит следующей?

**Модель:** Цепь Маркова — система с конечным числом состояний, где переход в следующее состояние зависит только от текущего состояния (не зависит от истории).

**Пример:** Три страницы: Главная (H), Каталог (C), Корзина (B).

Матрица переходов (вероятности):

|       | H   | C   | B   |
| ----- | --- | --- | --- |
| **H** | 0.5 | 0.4 | 0.1 |
| **C** | 0.2 | 0.5 | 0.3 |
| **B** | 0.6 | 0.3 | 0.1 |

Интерпретация:
- Если пользователь на Главной (H), то с вероятностью 50% останется на Главной, с 40% перейдёт в Каталог, с 10% в Корзину.

**Задача:** Пользователь сейчас в Каталоге (C). Какова вероятность, что через 2 шага он окажется в Корзине (B)?

Решение: Матричное умножение (или симуляция).

```
P(C → B за 2 шага) = P(C → H) × P(H → B) + P(C → C) × P(C → B) + P(C → B) × P(B → B)
P = 0.2 × 0.1 + 0.5 × 0.3 + 0.3 × 0.1
P = 0.02 + 0.15 + 0.03
P = 0.2 (20%)
```

**Ответ:** С вероятностью 20% пользователь окажется в Корзине через 2 перехода.

---

## 4.3.4. Как выбрать тип модели?

При решении задачи возникает вопрос: **какую модель использовать?**

Вот простой алгоритм выбора:

### Шаг 1: Определить цель моделирования

- **Понять систему** → графическая модель (блок-схема, UML, граф)
- **Спрогнозировать будущее** → математическая модель (регрессия, дифференциальные уравнения)
- **Оптимизировать** → математическая модель (линейное программирование, теория игр)
- **Оценить риски** → стохастическая модель (Монте-Карло, теория вероятностей)

### Шаг 2: Оценить сложность системы

- **Простая система** → аналитическая модель (формула)
- **Сложная система** → имитационная модель (симуляция)

### Шаг 3: Есть ли случайность?

- **Детерминированная система** → детерминированная модель
- **Случайная система** → стохастическая модель

### Шаг 4: Важно ли время?

- **Статическая система** → статическая модель (таблица, граф)
- **Динамическая система** → динамическая модель (дифференциальные уравнения, симуляция)

---

## Термины и определения

**Статическая модель** — модель, описывающая состояние системы в фиксированный момент времени.

**Динамическая модель** — модель, описывающая изменение системы во времени.

**Аналитическая модель** — модель в виде формулы или уравнения, которое можно решить математически.

**Имитационная модель (симуляция)** — модель, которая симулирует поведение системы шаг за шагом.

**Детерминированная модель** — модель без случайности, результат предсказуем.

**Стохастическая модель (вероятностная)** — модель, учитывающая случайность.

**Алгебраическая модель** — модель в виде алгебраических уравнений (без производных).

**Дифференциальное уравнение** — уравнение, связывающее функцию с её производными (скоростью изменения).

**Линейная регрессия** — статистическая модель для прогнозирования зависимости `y = ax + b`.

**Корреляция** — мера связи между двумя переменными.

**Теория вероятностей** — раздел математики, изучающий случайные события.

**Теория массового обслуживания** — раздел теории вероятностей, изучающий очереди.

**Метод Монте-Карло** — метод имитационного моделирования на основе случайных чисел.

**Граф** — математическая модель для описания связей между объектами.

**Теория игр** — раздел математики, изучающий стратегическое взаимодействие между игроками.

**Равновесие Нэша** — ситуация в игре, где ни одному игроку не выгодно менять стратегию.

**Модель SIR** — модель распространения эпидемии (Susceptible, Infected, Recovered).

**Уравнения Лотки-Вольтерры** — модель "хищник-жертва".

**PageRank** — алгоритм ранжирования веб-страниц (Google).

**Цепь Маркова** — система с конечным числом состояний, где переход зависит только от текущего состояния.

---

## Контрольные вопросы

### Теоретические:

1. **Чем отличаются статические и динамические модели? Приведите примеры.**  
   _Подсказка: статические = фиксированный момент времени, динамические = изменение во времени._

2. **Что такое аналитическая модель? Чем она отличается от имитационной?**  
   _Подсказка: аналитическая = формула, имитационная = симуляция._

3. **В чём разница между детерминированной и стохастической моделью?**  
   _Подсказка: детерминированная = нет случайности, стохастическая = есть случайность._

4. **Что такое дифференциальное уравнение? Зачем оно нужно?**  
   _Подсказка: уравнение со скоростью изменения, описывает динамические процессы._

5. **Что такое линейная регрессия? Для чего используется?**  
   _Подсказка: модель `y = ax + b`, для прогнозирования зависимости._

6. **Что такое граф? Из чего он состоит? Приведите примеры применения.**  
   _Подсказка: узлы и рёбра, социальные сети, навигация, зависимости задач._

7. **Что такое теория игр? Что такое равновесие Нэша?**  
   _Подсказка: стратегическое взаимодействие, равновесие = никому не выгодно менять стратегию._

### Практические:

8. **Задача:** Модель остывания кофе: `T(t) = 20 + 70 × e^(-0.2t)`. Какая температура будет через 5 минут?  
   _Ответ:_ `T(5) = 20 + 70 × e^(-1) ≈ 20 + 70 × 0.368 ≈ 45.8°C`

9. **Задача:** В магазин приходит 30 клиентов/час, касса обслуживает 40 клиентов/час. Рассчитайте среднее время ожидания в очереди (модель M/M/1: `W = ρ / (μ × (1 - ρ))`).  
   _Ответ:_ `ρ = 30/40 = 0.75`, `W = 0.75 / (40 × 0.25) = 0.75 / 10 = 0.075 часа = 4.5 минуты`

10. **Задача:** Оптимальный размер заказа. `D = 5000`, `S = 100 ₽`, `H = 2 ₽`. Найдите `Q*` по формуле `Q* = √((2×D×S)/H)`.  
    _Ответ:_ `Q* = √((2×5000×100)/2) = √(1000000/2) = √500000 ≈ 707 единиц`

11. **Задача:** Модель логистического роста: `P(t) = 500 / (1 + 9 × e^(-0.3t))`. Найдите численность популяции через 10 лет.  
    _Ответ:_ `P(10) = 500 / (1 + 9 × e^(-3)) ≈ 500 / (1 + 9 × 0.05) ≈ 500 / 1.45 ≈ 345`

12. **Задача:** Граф дорог. Москва ←(700 км)→ СПб, Москва ←(400 км)→ Казань, Казань ←(800 км)→ СПб. Найдите кратчайший путь от Москвы до СПб.  
    _Ответ:_ Прямой путь: 700 км. Через Казань: 400 + 800 = 1200 км. Кратчайший: 700 км (прямой).

13. **Задача:** Дисконтирование. Проект приносит 50 тыс. ₽ в год 1 и 80 тыс. ₽ в год 2. Ставка дисконтирования 12%. Найдите PV.  
    _Ответ:_ `PV = 50/(1.12) + 80/(1.12)² = 50/1.12 + 80/1.2544 ≈ 44.64 + 63.78 ≈ 108.42 тыс. ₽`

14. **Задача:** Метод Монте-Карло для оценки π. Из 5000 случайных точек в квадрате 3927 попали внутрь круга. Оцените π.  
    _Ответ:_ `π ≈ 4 × 3927 / 5000 = 3.1416`

15. **Задача:** Цепь Маркова. Матрица переходов: `P(A→A)=0.6, P(A→B)=0.4, P(B→A)=0.3, P(B→B)=0.7`. Пользователь в состоянии A. Какова вероятность, что через 1 шаг он будет в состоянии B?  
    _Ответ:_ `P(A→B) = 0.4 (40%)`

---

## Заключение

Классификация видов моделирования — это **не просто академическая муть**, это инструмент для выбора правильного подхода к решению задачи.

**Статическая или динамическая?** Зависит от того, важно ли время.  
**Аналитическая или имитационная?** Зависит от сложности системы.  
**Детерминированная или стохастическая?** Зависит от наличия случайности.

**Математические модели** — это мощнейший инструмент. От простых алгебраических уравнений до дифференциальных уравнений, от статистических моделей до теории игр — всё это используется в реальной жизни: прогноз погоды, рекомендации YouTube, оптимизация логистики, оценка рисков инвестиций, разработка игр, искусственный интеллект.

**Главное:** Не зубри формулы, а **понимай идею** каждой модели. Когда столкнёшься с реальной задачей, ты должен понимать, **какой инструмент взять** — линейную регрессию, дифференциальное уравнение, симуляцию Монте-Карло или граф.

В следующей главе (4.4) мы поговорим о **моделях решения функциональных задач** и **системном подходе**.

**Следующая глава:** 4.4 Модели решения функциональных задач. Системный подход  
**Предыдущая глава:** 4.2 Информационные модели. Моделирование процессов


---

[← К оглавлению](README.md)

*Глава 4.3: Классификация видов моделирования. Математические модели*
