# Глава 1.8: Представление графических данных в двоичном коде

## Введение

Значит так. Вся эта визуальная херня — фотки в Инсте, мемы в телеге, скриншоты багов для преподов — всё это надо как-то хранить в компьютере. А компьютер, напомню, понимает только нули и единицы. Как запихнуть в эти нули-единицы картинку Моны Лизы или свежий мем про котиков? Сейчас разберёмся.

Графика бывает двух принципиально разных типов: **растровая** (сетка пикселей) и **векторная** (математические формулы). Первая — для фоток и сложной графики, вторая — для логотипов и чертежей. И у каждой свои плюсы и минусы.

Эта тема связана с главой 1.2 (как данные хранятся в памяти) и главой 1.5 (как считать объёмы). А ещё пригодится в главе 1.12 про сжатие, потому что картинки жрут дофига места и их надо сжимать.

## Два подхода к представлению графики

### Растровая графика (bitmap, битовая карта)

**Растровая графика** — это когда картинка представлена как прямоугольная сетка цветных точек — **пикселей** (picture element — элемент изображения).

**Пиксель** — минимальный элемент растрового изображения, у которого есть цвет. Каждый пиксель описывается набором битов.

Основные характеристики:

1. **Ширина (W)** — количество пикселей по горизонтали
2. **Высота (H)** — количество пикселей по вертикали
3. **Разрешение** — W × H (например, 1920×1080)
4. **Глубина цвета** (битовая глубина) — количество бит на один пиксель

**Плюсы растра:**
- ✅ Фотореалистичность — передаёт сложные цветовые переходы
- ✅ Простота обработки — пиксель независим от других
- ✅ Широкая поддержка — все устройства работают с растром

**Минусы:**
- ⚠️ Большой объём данных (особенно для высоких разрешений)
- ⚠️ Потеря качества при масштабировании (пикселизация — вот эти квадратики)
- ⚠️ Зависимость от разрешения

### Векторная графика

**Векторная графика** — это когда изображение описывается математическими объектами: линиями, кривыми, многоугольниками, окружностями.

Например, окружность:
```
Окружность: центр = (100, 150), радиус = 50, цвет = RGB(255, 0, 0)
```

**Плюсы вектора:**
- ✅ Масштабируется без потери качества (хоть на билборд растяни)
- ✅ Малый объём данных (формулы компактнее растра)
- ✅ Можно редактировать отдельные объекты
- ✅ Независимость от разрешения

**Минусы:**
- ⚠️ Не подходит для фоток (попробуй описать лицо формулами)
- ⚠️ Сложность описания сложных изображений
- ⚠️ Требуется растеризация для отображения на экране

**Где что использовать:**

| Растр                    | Вектор                        |
| ------------------------ | ----------------------------- |
| Фотографии               | Логотипы компаний             |
| Сканированные документы  | Диаграммы и схемы             |
| Сложная веб-графика      | Иконки интерфейсов            |
| Цифровая живопись        | Чертежи                       |
| Текстуры для 3D          | Карты                         |
| Медицинские снимки       | Шрифты (TrueType, OpenType)   |

## Цветовые модели (как описать цвет)

### RGB (Red-Green-Blue) — для экранов

**RGB** — аддитивная (сложение цветов) модель. Смешиваешь красный, зелёный и синий — получаешь любой цвет. Используется в мониторах, телевизорах, проекторах (всё, что светится).

Каждый компонент (R, G, B) — это число:
- При 8 битах на канал: 0–255 (256 градаций)
- При 16 битах: 0–65535

**Примеры цветов (8 бит на канал):**
- Чёрный: RGB(0, 0, 0)
- Белый: RGB(255, 255, 255)
- Красный: RGB(255, 0, 0)
- Жёлтый: RGB(255, 255, 0) — смешали красный + зелёный
- Серый: RGB(127, 127, 127)

**Глубина цвета в RGB:**

| Глубина | Бит на пиксель | Описание                                |
| ------- | -------------- | --------------------------------------- |
| 8 бит   | 8              | 256 цветов (палитра)                    |
| 16 бит  | 16             | High Color (5-6-5) = 65 536 цветов     |
| 24 бит  | 24             | True Color (8-8-8) = 16 777 216 цветов |
| 32 бит  | 32             | True Color + Alpha (прозрачность)      |
| 48 бит  | 48             | Deep Color (16-16-16) для профи        |

### CMYK (Cyan-Magenta-Yellow-blacK) — для печати

**CMYK** — субтрактивная (вычитание цветов) модель. Используется в принтерах и полиграфии.

Компоненты: голубой, пурпурный, жёлтый и чёрный. Каждый в процентах от 0% до 100%.

**Почему чёрный отдельно?** Теоретически чёрный = C+M+Y, но на практике получается грязно-коричневый. Чёрная краска даёт насыщенный чёрный и экономит цветные краски.

### HSV/HSB (Hue-Saturation-Value) — для людей

**HSV** — модель, удобная для человеческого восприятия:
- **Hue (оттенок)** — цвет на цветовом круге (0°–360°)
- **Saturation (насыщенность)** — интенсивность цвета (0%–100%)
- **Value (яркость)** — светлота (0%–100%)

Часто используется в графических редакторах для выбора цвета.

### Grayscale (оттенки серого)

**Grayscale** — монохромная модель, только яркость без цвета.

- 1 бит: чёрно-белое (2 значения)
- 8 бит: 256 оттенков серого
- 16 бит: 65 536 оттенков (медицинская визуализация)

## Расчёт объёма растрового изображения

Формула (зубрить!):

**V = (W × H × D) / 8**

где:
- **V** — объём в байтах
- **W** — ширина в пикселях
- **H** — высота в пикселях
- **D** — глубина цвета в битах на пиксель
- **/8** — перевод из битов в байты

## Форматы графических файлов

### Растровые форматы

#### BMP (Bitmap) — простейший

**BMP** — базовый формат Windows, обычно без сжатия.

- Простая структура
- Большой размер (нет сжатия или слабое RLE)
- Поддержка глубины 1, 4, 8, 16, 24, 32 бита
- Применение: временные файлы, обмен между программами

#### PNG (Portable Network Graphics) — для веба

**PNG** — современный формат со сжатием без потерь. Альтернатива GIF.

- Сжатие без потерь (алгоритм Deflate)
- Поддержка прозрачности (альфа-канал 8 или 16 бит)
- Глубина цвета до 48 бит
- Применение: веб-графика с прозрачностью, иконки, скриншоты

Коэффициент сжатия: 1.5–3× (зависит от содержимого)

#### JPEG (Joint Photographic Experts Group) — для фоток

**JPEG** — сжатие с потерями, оптимизированное для фотографий.

- Сжатие с потерями (алгоритм DCT)
- Регулируемое качество (0–100%)
- Нет прозрачности
- Глубина 24 бита
- Применение: фотографии, веб

Коэффициент сжатия: 10–20× при хорошем качестве, до 100× при низком.

**Минусы:** Артефакты сжатия (блоки 8×8), не подходит для текста и чётких линий.

#### GIF (Graphics Interchange Format) — для анимации

**GIF** — старый формат с ограниченной палитрой, но с анимацией.

- Палитра 256 цветов (8 бит)
- Сжатие без потерь (LZW)
- Прозрачность (1 бит — да/нет)
- Анимация (последовательность кадров)
- Применение: простая анимация (устаревает)

**Ограничения:** Только 256 цветов, плохо для фоток.

#### WebP — современная замена

**WebP** — формат от Google, поддерживает всё: сжатие с потерями и без, прозрачность, анимацию.

- Лучше сжатие, чем JPEG и PNG (на 25–35%)
- Применение: современная веб-графика

#### TIFF — для профессионалов

**TIFF** — профессиональный формат без потерь.

- Гибкая структура (теги)
- Различные сжатия (LZW, ZIP, без сжатия)
- Глубина до 64 бит
- Многостраничность
- Применение: полиграфия, архивирование, медицина

### Векторные форматы

#### SVG (Scalable Vector Graphics) — для веба

**SVG** — открытый XML-формат для веб-векторной графики.

- Текстовый формат (можно редактировать в блокноте)
- Поддержка JavaScript и CSS
- Масштабируется без потери качества
- Применение: веб-иконки, логотипы, диаграммы

#### AI (Adobe Illustrator) — для дизайнеров

Проприетарный формат Adobe Illustrator для профессионального дизайна.

#### EPS (Encapsulated PostScript) — для полиграфии

Универсальный векторный формат на основе PostScript. Обмен между программами, полиграфия.

#### PDF (Portable Document Format) — универсальный

Может содержать и векторную, и растровую графику. Документы, печать, архивирование.

## Практические примеры (чтоб в башку уложилось)

### Пример 1: Расчёт объёма изображения

**Задача:** Рассчитай объём несжатого изображения 1920×1080 пикселей, глубина 24 бита (True Color RGB).

**Решение:**

```
V = (W × H × D) / 8
V = (1920 × 1080 × 24) / 8
V = (2 073 600 × 24) / 8
V = 49 766 400 / 8
V = 6 220 800 байт
```

Переводим в мегабайты:
```
V = 6 220 800 / (1024 × 1024)
V ≈ 5,93 МБ
```

**Ответ:** Несжатое изображение Full HD занимает примерно **5,93 МБ**.

### Пример 2: Изображение с прозрачностью

**Задача:** Рассчитай объём изображения 800×600 пикселей, 32 бита (24 RGB + 8 альфа).

**Решение:**

```
V = (800 × 600 × 32) / 8
V = (480 000 × 32) / 8
V = 15 360 000 / 8
V = 1 920 000 байт ≈ 1,83 МБ
```

**Ответ:** **1,83 МБ**.

### Пример 3: Сравнение глубины цвета

**Задача:** Сравни объёмы изображения 1024×768 при разной глубине:
- a) 8 бит (256 цветов)
- b) 16 бит (High Color)
- c) 24 бит (True Color)

**Решение:**

a) 8 бит:
```
V = (1024 × 768 × 8) / 8 = 786 432 байт ≈ 768 КБ
```

b) 16 бит:
```
V = (1024 × 768 × 16) / 8 = 1 572 864 байт ≈ 1,5 МБ
```

c) 24 бит:
```
V = (1024 × 768 × 24) / 8 = 2 359 296 байт ≈ 2,25 МБ
```

**Ответ:**
- 8 бит: 768 КБ (в 3 раза меньше True Color)
- 16 бит: 1,5 МБ (в 1,5 раза меньше)
- 24 бит: 2,25 МБ

### Пример 4: Эффективность сжатия JPEG

**Задача:** Фотография 4000×3000 пикселей в JPEG (качество 85%) занимает 2,1 МБ. Рассчитай:
- a) Объём несжатого изображения (24 бита)
- b) Коэффициент сжатия

**Решение:**

a) Несжатый объём:
```
V = (4000 × 3000 × 24) / 8 = 36 000 000 байт ≈ 34,33 МБ
```

b) Коэффициент сжатия:
```
K = 34,33 / 2,1 ≈ 16,35
```

**Ответ:** Несжатое — 34,33 МБ, JPEG даёт коэффициент **16,35×** (в 16 раз меньше).

### Пример 5: PNG против BMP

**Задача:** Скриншот 1920×1080 в BMP занимает 6,2 МБ. После конвертации в PNG — 1,8 МБ. Коэффициент сжатия?

**Решение:**

```
K = 6,2 / 1,8 ≈ 3,44
```

**Ответ:** PNG сжал в **3,44 раза** без потери качества.

**Почему:** Скриншоты содержат много повторяющихся областей (фон, панели), что хорошо сжимается алгоритмом Deflate.

### Пример 6: Выбор формата

**Задача:** Выбери оптимальный формат для:
- a) Логотип компании с прозрачностью для сайта
- b) Фотография пейзажа для блога
- c) Анимированный баннер
- d) Чертёж для печати

**Решение:**

a) **Логотип с прозрачностью:**
   - Лучший: **SVG** (векторный, масштабируемый, малый размер)
   - Альтернатива: **PNG** (если есть растровые эффекты)
   - Почему: SVG идеален для логотипов, качество на любых экранах

b) **Фотография пейзажа:**
   - Лучший: **JPEG** (качество 80–85%)
   - Современная альтернатива: **WebP**
   - Почему: JPEG оптимален для фоток с плавными переходами

c) **Анимированный баннер:**
   - Старый: **GIF** (для совместимости)
   - Современный: **WebP** (анимация) или видео (MP4)
   - Почему: GIF устарел, но поддерживается везде

d) **Чертёж для печати:**
   - Лучший: **PDF** (векторный) или **EPS**
   - Альтернатива: **TIFF** (если нужен растр)
   - Почему: Векторные форматы — идеальное качество печати

### Пример 7: Видео (бонус)

**Задача:** Несжатое видео 1280×720, 30 FPS, 24 бита, 1 минута. Рассчитай объём.

**Решение:**

Шаг 1: Объём одного кадра:
```
V_кадра = (1280 × 720 × 24) / 8 = 2 764 800 байт
```

Шаг 2: Количество кадров:
```
N = 30 FPS × 60 сек = 1800 кадров
```

Шаг 3: Общий объём:
```
V = 2 764 800 × 1800 = 4 976 640 000 байт ≈ 4,63 ГБ
```

**Ответ:** Одна минута несжатого HD-видео — **4,63 ГБ**.

**Практическое следствие:** Видео необходимо сжимать. Современные кодеки (H.264, H.265) сжимают в 50–200 раз, уменьшая до 50–100 МБ на минуту при хорошем качестве.

## Практическое применение

### В веб-разработке

- Логотипы, иконки: **SVG**
- Фотографии: **JPEG** или **WebP**
- Изображения с прозрачностью: **PNG** или **WebP**
- Адаптивные изображения: несколько версий разного разрешения

### В графическом дизайне

- Работа в векторе: **AI**, **SVG**
- Обработка фоток: **TIFF**, **PSD**
- Экспорт для разных целей (печать, веб, соцсети)

### В полиграфии

- CMYK обязательна
- Высокое разрешение: 300 dpi
- Форматы: **TIFF**, **PDF**, **EPS**

### В медицине

- **DICOM** — специализированный формат (рентген, КТ, МРТ)
- 16-битная глубина (grayscale)
- Сжатие только без потерь

### В машинном обучении

- Обработка растровых изображений для распознавания
- Обучение нейросетей на больших наборах
- Предобработка: изменение разрешения, нормализация

## Связь с другими главами

- **Глава 1.1**: Арифметика в двоичной системе — основа хранения RGB
- **Глава 1.2**: Представление данных в памяти — организация хранения пикселей
- **Глава 1.5**: Меры информации — расчёты объёмов
- **Глава 1.12**: Сжатие информации — алгоритмы сжатия графики (Deflate для PNG, DCT для JPEG, LZW для GIF)
- **Раздел 8**: Сети — передача графики по сети, оптимизация для веба

## Ключевые термины (зубрить!)

**Растровая графика** — изображение в виде сетки пикселей.

**Векторная графика** — изображение в виде математических объектов.

**Пиксель** — минимальный элемент растра, имеющий цвет.

**Разрешение** — количество пикселей (ширина × высота).

**Глубина цвета** — количество бит на один пиксель.

**RGB** — аддитивная модель (красный + зелёный + синий).

**CMYK** — субтрактивная модель для печати (голубой + пурпурный + жёлтый + чёрный).

**Альфа-канал** — дополнительный канал для прозрачности.

**True Color** — 24 бита (по 8 на R, G, B) = 16 777 216 цветов.

**Lossless** — сжатие без потерь.

**Lossy** — сжатие с потерями.

**Растеризация** — преобразование вектора в растр.

## Контрольные вопросы

1. **В чём разница между растром и вектором?** Приведи по два примера применения каждого типа.

2. **Рассчитай объём несжатого изображения:** 2560×1440 пикселей, 32 бита (RGB + альфа). Ответ в мегабайтах.

3. **Объясни модель RGB:** Как получается белый? Как жёлтый? Почему она аддитивная?

4. **В чём разница между PNG и JPEG?** Когда что использовать? Какой с потерями?

5. **Почему векторные изображения не теряют качество при масштабировании, а растровые теряют?** Что происходит при увеличении растра?

6. **Что такое альфа-канал?** Сколько бит добавляет? Пример использования прозрачности.

7. **Задача:** Фотография 4096×2160 (4K) в JPEG занимает 3 МБ. Рассчитай коэффициент сжатия (исходная глубина 24 бита).

## Резюме

В этой главе мы разобрали:

1. ✅ **Два подхода:** растр (сетка пикселей) и вектор (математические объекты)
2. ✅ **Цветовые модели:** RGB (экраны), CMYK (печать), HSV (для людей), Grayscale (оттенки серого)
3. ✅ **Глубину цвета:** от 1 бита до 48 бит, True Color (24 бита)
4. ✅ **Формулу расчёта:** V = (W × H × D) / 8
5. ✅ **Форматы:**
   - Растр: BMP, PNG, JPEG, GIF, WebP, TIFF
   - Вектор: SVG, AI, EPS, PDF
6. ✅ **Методы сжатия:** без потерь (PNG, GIF) и с потерями (JPEG)
7. ✅ **Применение:** выбор форматов для разных задач

Теперь ты должен уметь:

- Различать растр и вектор, понимать области применения
- Рассчитывать объём растрового изображения
- Объяснять RGB и CMYK
- Выбирать оптимальный формат для задачи
- Оценивать эффективность сжатия

Эти знания пригодятся в главе 1.12 про сжатие и в разделе 8 про передачу данных по сетям.

---

_Конец главы_
